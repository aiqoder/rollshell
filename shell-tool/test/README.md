# ZMODEM 自动化测试

## 概述

这个测试脚本用于自动化测试 ZMODEM 文件传输功能，包括上传 (rz) 和下载 (sz)。

## 测试内容

1. **创建测试连接** - 连接到测试服务器
2. **创建 SSH 会话** - 建立 SSH shell 连接
3. **测试上传 (rz)** - 上传本地文件到远程服务器
4. **测试下载 (sz)** - 从远程服务器下载文件
5. **验证文件完整性** - 检查下载的文件是否正确

## 测试服务器配置

测试脚本使用以下服务器进行测试：
- IP: `103.115.41.16`
- 端口: `16457`
- 用户名: `root`
- 密码: `2oHxKzttR6Wv8`

## 运行测试

### 前提条件

1. 确保已构建 Go 动态库：
   ```bash
   npm run build:lib
   ```

2. 确保动态库位于 `out/libs/` 目录

### 运行方式

```bash
npm run test:zmodem
```

或者直接使用 Electron：

```bash
electron test/zmodem-test.ts
```

## 测试流程

1. **初始化** - 初始化 Electron 应用环境
2. **准备** - 创建测试目录和测试文件
3. **连接** - 创建 SSH 连接配置
4. **会话** - 建立 SSH shell 会话
5. **上传** - 测试文件上传功能（100KB 测试文件）
6. **下载** - 测试文件下载功能
7. **验证** - 验证下载文件的完整性
8. **清理** - 清理测试资源和连接

## 测试输出

测试脚本会输出详细的测试过程信息和最终结果汇总，包括：
- 每个测试步骤的成功/失败状态
- 测试耗时
- 传输速度和文件大小
- 错误信息（如果有）

## 注意事项

1. 测试需要网络连接和访问测试服务器的权限
2. 测试会在系统临时目录创建测试文件
3. 测试完成后会自动清理资源
4. 测试过程中不会打开 Electron 窗口（无头模式）

## 故障排除

如果测试失败，请检查：
1. 网络连接是否正常
2. 测试服务器是否可访问
3. Go 动态库是否正确构建
4. 动态库路径是否正确

